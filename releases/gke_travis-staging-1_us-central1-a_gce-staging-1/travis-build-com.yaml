apiVersion: flux.weave.works/v1beta1
kind: HelmRelease
metadata:
  name: travis-build-com
  namespace: gce-staging-1
spec:
  chart:
    path: charts/travis-build
    git: git@github.com:travis-ci/kubernetes-config.git
    ref: staging
  releaseName: travis-build-com
  values:
    image:
      repository: travisci/travis-build
      tag: latest

    project: travis-staging-1

    trvs:
      enabled: true
      app: travis-build-com
      env: staging-1
      pro: true

    # in trvs:
    #   API_TOKEN
    #   GITHUB_PRIVATE_PEM
    #   LIBRATO_EMAIL
    #   LIBRATO_TOKEN
    #   SENTRY_DSN
    #   ROLLOUT_REDIRECT_IO_OWNERS_BLOCKLIST ptyOwners

    debug: "true"
    libratoSource: travis-pro-build-staging
    rackEnv: staging
    appHost: build-staging.travis-ci.com
    aptProxy: http://staging-1-build-cache.gce-us-central1.travisci.net
    aptSafelistSkip: "true"
    enableDebugTools: "true"
    site: com
